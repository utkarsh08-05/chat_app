{% extends "layout.html" %}

{% block content %}
<h4 class="mb-3">Chat with {{ other_user.username }}</h4>

<div class="border p-3 mb-3" style="height: 400px; overflow-y: auto;">
    {% for msg in messages %}
        <div class="mb-2">
            <strong>
                {% if msg.sender == request.user %}
                    You
                {% else %}
                    {{ msg.sender.username }}
                {% endif %}
            </strong>:
            {{ msg.content }}
        </div>
    {% empty %}
        <p class="text-muted">No messages yet.</p>
    {% endfor %}
</div>

<form method="post">
    {% csrf_token %}
    <div class="input-group">
        <input
            type="text"
            name="content"
            class="form-control"
            placeholder="Type a message"
            required
        >
        <button class="btn btn-primary">Send</button>
    </div>
</form>
{% endblock %}
